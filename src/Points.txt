OpenID 
	Superset of OAuth2 which add authentication

End Point:
	Authorization endpoint (IDP Level) -> redirection from client to IDP
	Token endpoint (IDP level) -> client request token (httpost)
	Rediction endpoint (client level) -> redirect too client
OpenID Flow
	Confidential Client : Web App
	Public Client : JS or Mobile App

Setup IdentityServer:
	When completed it will provide all the endpoints
	Setup users => scope = what can be accessed 
	Setup clients => scope = what can be accessed 

Setup in Client :
	Customize Authentication : need package openid connect
	OpenIDConnect is a middleware
	Logging in
		-> Client Restricted page 
		-> Midlleware Redirect to IS login endpoint
		-> Logged In 
		-> IS calls redirect url (signin-oidc)
			-> Client Middleware calls token endpoint  (Server to server)
			-> IS return token 
		-> back to restricted page

	Logging out
		-> Client logout action
		-> Middleware redirect browser to IS logout endpoint
		-> IS logout working
		-> IS Logout call client post signout-callback url 
		-> middleware handle signout-callback url  

Getting other info from UserInfo Endpoint
	sample : Getting address info by calling userinfo endpoint manually
			 Address can be returned inside token, but it will cause token size to be bigger, and might be not needed
	Configure on IDP
		Add address scope in client config and identity resource
	Configure on Client
		Add address scope

Adding Role Based Authorization (RBAC)
	Role is new claim type
	Configure on IDP
		Add scope for user
		Add roles to users
	Configure on client
		Add mapping for roles
		Using User.IsInRole
		Diff betweeen userinfo nameclaim and roleclaim => need to add TokenValidationParameters => why ?


Securing API :	
	insepct identity token and access token
	Diffrent between roles in client vs api
	Configure IDP
		Add Api Scope
		Add Api Resource 
			ApiScopes is what you ask for as a client and as a user you give consent to. Optionally, one or more ApiResources can associated with an ApiScope.
			ApiResources points out what the aud claim in the access token will contains.
			The ApiScope and ApiResources controls what is included in the access token. 
	Configure API
		IdentityServer4.AccessTokenValidation
			ApiName = Resource name in IDP		
	Configure Client 
		Call Api using access token, using DelegatingHandler
	
	Add roles based to access token
	
	
